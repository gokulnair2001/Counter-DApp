<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
        <title>
            Deploying Counter to Polygon
        </title>
    </head>
    <body>
        <script type="text/javascript">
        // 1. Connect Metamask to the site
        var account = null;
        (async () => {
            if(window.ethereum){
            await window.ethereum.send('eth_requestAccounts');
            window.web3 = new Web3(window.ethereum);

            var accounts = await web3.eth.getAccounts();
            account = accounts[0];
            }
        })();
    //0x60806040526000805534801561001457600080fd5b5061018f806100246000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c806306661abd1461003b578063d09de08a14610059575b600080fd5b610043610077565b60405161005091906100af565b60405180910390f35b61006161007d565b60405161006e91906100af565b60405180910390f35b60005481565b6000600160008082825461009191906100ca565b92505081905550600054905090565b6100a981610120565b82525050565b60006020820190506100c460008301846100a0565b92915050565b60006100d582610120565b91506100e083610120565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156101155761011461012a565b5b828201905092915050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fdfea2646970667358221220cd63f6f40c7f796ab7d8a811a92be4286c3263e335eac5a72c50044013735a0964736f6c63430008070033
        // 2. Deploy the Bytecode
        const deploy = async (abi, bytecode) => {
            var deployingContract = new web3.eth.Contract(abi).deploy({
            data: bytecode,
            arguments: []
        });
        var estimatedGas = await deployingContract.estimateGas();

        var deployedContract = await deployingContract.send({
            from: account,
            gas: estimatedGas
        })

        console.log("Address of Contract:" + deployedContract.options.address);

        return deployedContract.options.address;
        }
        </script>
    </body>
</html>